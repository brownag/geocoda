% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/block_support.R
\name{gc_average_block_ilr_3d}
\alias{gc_average_block_ilr_3d}
\title{Average Sub-Point ILR Values to 3D Block Support}
\usage{
gc_average_block_ilr_3d(sim_result, sub_points)
}
\arguments{
\item{sim_result}{Simulation result data frame with sub-point locations and ILR values.
Columns should include ILR simulation results (e.g., ilr1.sim1, ilr2.sim1, etc.)}

\item{sub_points}{Data frame from \code{\link[=gc_discretize_block_3d]{gc_discretize_block_3d()}} with block_id column
linking each row to its parent 3D block}
}
\value{
Data frame with averaged ILR values per block per realization
\itemize{
\item Rows: One per 3D block
\item Columns: ilr1.sim1, ilr1.sim2, ..., ilr2.sim1, ilr2.sim2, ...
(or equivalent MAF columns if MAF transformation was used)
}
}
\description{
Compute 3D block-averaged ILR values from simulated sub-point results.
Averages across all sub-points within each block for each simulation realization.
}
\details{
\strong{Averaging operation (3D extension):}
For each 3D block B and simulation S:

\if{html}{\out{<div class="sourceCode">}}\preformatted{ILR_B^S = mean(ILR_ijk^S : (i,j,k) âˆˆ sub-points of B)
}\if{html}{\out{</div>}}

This averaging creates the volume-variance relationship in 3D:
\itemize{
\item Block variance = Point variance / (number of sub-points)
\item Blocks are smoother than points (lower variance)
\item Effect is more pronounced in 3D due to larger sub-point counts
}
}
\examples{
\dontrun{
# After discretizing and simulating at 3D sub-point support
sub_points <- gc_discretize_block_3d(blocks, block_size = c(100, 100, 40))
sim_points <- gc_sim_composition(model, sub_points, nsim = 10, coordinates_3d = TRUE)

# Average to 3D block support
block_sims <- gc_average_block_ilr_3d(sim_points, sub_points)
}

}
