% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vertical_discretization.R
\name{gc_validate_depth_standardization}
\alias{gc_validate_depth_standardization}
\title{Validate Mass Conservation in Depth Standardization}
\usage{
gc_validate_depth_standardization(
  profiles_original,
  profiles_standardized,
  comp_cols = NULL,
  id_col = "mukey",
  tolerance = 0.01
)
}
\arguments{
\item{profiles_original}{Data frame with original horizon data}

\item{profiles_standardized}{Data frame from \code{\link[=gc_standardize_depths]{gc_standardize_depths()}}}

\item{comp_cols}{Character vector of columns to validate
(should match columns used in standardization)}

\item{id_col}{Character: Profile identifier column}

\item{tolerance}{Numeric: Relative tolerance for mass conservation check
Default: 0.01 (1\% error allowed)}
}
\value{
Data frame with validation results:
\itemize{
\item Column: Component column name
\item n_profiles: Number of profiles checked
\item n_conserved: Number of profiles meeting tolerance
\item pct_conserved: Percentage of profiles conserving mass
\item max_error_pct: Maximum error observed (\%)
\item mean_error_pct: Mean error across profiles (\%)
}
}
\description{
Check that depth standardization conserved total mass (sum) of properties.
Important for quantities like total carbon, clay mass, etc.
}
\details{
\strong{Mass conservation check:}
For each profile and component:
\itemize{
\item Original mass = sum of (horizon_value × horizon_thickness)
\item Standardized mass = sum of (interval_value × interval_thickness)
\item Error\% = |Original - Standardized| / Original × 100
}

Good mass conservation: error\% < 1\%
}
\examples{
\dontrun{
# Standardize and validate
original <- ssurgo_components
standardized <- gc_standardize_depths(original, comp_cols = c("sandtotal", "claytotal"))
validation <- gc_validate_depth_standardization(original, standardized)
print(validation)
}

}
