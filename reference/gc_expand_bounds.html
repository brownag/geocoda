<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expand Compositional Bounds into a Valid Grid — gc_expand_bounds • geocoda</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expand Compositional Bounds into a Valid Grid — gc_expand_bounds"><meta name="description" content="Generate a grid of valid compositions from component constraints. Uses
expand.grid() to create combinations of sequential component values
within specified bounds, then filters to rows where component sums equal the
target sum (within floating-point tolerance)."><meta property="og:description" content="Generate a grid of valid compositions from component constraints. Uses
expand.grid() to create combinations of sequential component values
within specified bounds, then filters to rows where component sums equal the
target sum (within floating-point tolerance)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geocoda</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/soil_texture_workflow.html">Soil Texture Workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Expand Compositional Bounds into a Valid Grid</h1>

      <div class="d-none name"><code>gc_expand_bounds.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate a grid of valid compositions from component constraints. Uses
<code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid()</a></code> to create combinations of sequential component values
within specified bounds, then filters to rows where component sums equal the
target sum (within floating-point tolerance).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gc_expand_bounds</span><span class="op">(</span><span class="va">constraints</span>, step <span class="op">=</span> <span class="fl">0.1</span>, target_sum <span class="op">=</span> <span class="fl">100</span>, tol <span class="op">=</span> <span class="fl">1e-06</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-constraints">constraints<a class="anchor" aria-label="anchor" href="#arg-constraints"></a></dt>
<dd><p>A named list of lists or data frame containing <code>min</code> and
<code>max</code> for each component. Example: <code>list(SAND = list(min = 0, max = 40), SILT = list(min = 50, max = 80), CLAY = list(min = 10, max = 20))</code>.</p></dd>


<dt id="arg-step">step<a class="anchor" aria-label="anchor" href="#arg-step"></a></dt>
<dd><p>Numeric resolution for the grid sequences (default 0.1).</p></dd>


<dt id="arg-target-sum">target_sum<a class="anchor" aria-label="anchor" href="#arg-target-sum"></a></dt>
<dd><p>Numeric constant sum for valid compositions (default 100).</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>Floating-point tolerance for sum constraint (default 1e-6).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame where columns are components and rows are valid
compositions summing to <code>target_sum</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function performs:</p><ol><li><p>Validation that min values do not sum to more than <code>target_sum</code></p></li>
<li><p>Dynamic sequence generation for each component based on bounds</p></li>
<li><p>Cartesian product expansion via <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid()</a></code></p></li>
<li><p>Filtering to compositions with sum approximately equal to <code>target_sum</code></p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Define sand, silt, clay bounds</span></span></span>
<span class="r-in"><span><span class="va">constraints</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  SAND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  SILT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min <span class="op">=</span> <span class="fl">50</span>, max <span class="op">=</span> <span class="fl">80</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CLAY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min <span class="op">=</span> <span class="fl">10</span>, max <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Expand with 1% resolution</span></span></span>
<span class="r-in"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">gc_expand_bounds</span><span class="op">(</span><span class="va">constraints</span>, step <span class="op">=</span> <span class="fl">1.0</span>, target_sum <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 341</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SAND SILT CLAY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   40   50   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   39   51   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   38   52   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   37   53   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   36   54   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   35   55   10</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

